# FileHarvester

–£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–≥–æ —Å–±–æ—Ä–∞ –∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≤ —Ü–µ–ª–µ–≤—É—é —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –æ–±—Ö–æ–¥** –≤—Å–µ—Ö –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
- **–ì–∏–±–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è** —Ñ–∞–π–ª–æ–≤ –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º (include/exclude –ø—Ä–∞–≤–∏–ª–∞)
- **–ü–ª–æ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** –≤ —Ü–µ–ª–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (–≤—Å–µ —Ñ–∞–π–ª—ã –≤ –æ–¥–Ω–æ–π –ø–∞–ø–∫–µ)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤** –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤
- **–¶–≤–µ—Ç–Ω–æ–π –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥** —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º –æ–ø–µ—Ä–∞—Ü–∏–π
- **–ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π** –¥–æ –∏ –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ó–∞–ø—É—Å–∫

```bash
java -jar fileharvester.jar
```

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –∑–∞–ø—Ä–æ—Å–∏—Ç:

1. **–ò—Å—Ö–æ–¥–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é** - –æ—Ç–∫—É–¥–∞ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã
2. **–¶–µ–ª–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é** - –∫—É–¥–∞ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã
3. **–ü—Ä–∞–≤–∏–ª–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è**

### –ü—Ä–∏–º–µ—Ä—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤

```
–¢–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
+jpg,+png,+gif,+bmp

–î–æ–∫—É–º–µ–Ω—Ç—ã –±–µ–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:
+pdf,+doc,+docx,-tmp,-bak

–í—Å–µ —Ñ–∞–π–ª—ã –∫—Ä–æ–º–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö:
-sys,-tmp,-log

–ë–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞ (–≤—Å–µ —Ñ–∞–π–ª—ã):
[Enter - –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞]
```

## –ü—Ä–∞–≤–∏–ª–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

- **`+ext`** - –≤–∫–ª—é—á–∏—Ç—å —Ñ–∞–π–ª—ã —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º `ext`
- **`-ext`** - –∏—Å–∫–ª—é—á–∏—Ç—å —Ñ–∞–π–ª—ã —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º `ext`
- **`+noext`** - –≤–∫–ª—é—á–∏—Ç—å —Ñ–∞–π–ª—ã –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
- **`-noext`** - –∏—Å–∫–ª—é—á–∏—Ç—å —Ñ–∞–π–ª—ã –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

- –ï—Å–ª–∏ –µ—Å—Ç—å **include** –ø—Ä–∞–≤–∏–ª–∞ (`+`) ‚Üí —Ä–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã
- –ï—Å–ª–∏ —Ç–æ–ª—å–∫–æ **exclude** –ø—Ä–∞–≤–∏–ª–∞ (`-`) ‚Üí —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –≤—Å—ë –∫—Ä–æ–º–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ
- –ú–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å: `+jpg,+png,-tmp`

## –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```java
HarvesterConfig config = HarvesterConfig.builder()
    .sourceDirectory(Paths.get("/source/directory"))
    .targetDirectory(Paths.get("/target/directory"))
    .createTargetIfNotExists(true)
    .overwriteExisting(false)
    .build();

FileHarvesterService harvester = new FileHarvesterServiceImpl();
HarvestResult result = harvester.harvest(config);
```

### –° —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π

```java
// –¢–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
FileFilterStrategy imageFilter = new FlexibleExtensionFilterStrategy(
    "+jpg", "+png", "+gif", "+bmp"
);

HarvesterConfig config = HarvesterConfig.builder()
    .sourceDirectory(sourceDir)
    .targetDirectory(targetDir) 
    .fileFilterStrategy(imageFilter)
    .build();
```

### –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤

```java
FileFilterStrategy filter1 = new FlexibleExtensionFilterStrategy("+jpg", "+png");
FileFilterStrategy filter2 = new FlexibleExtensionFilterStrategy("-tmp");

// –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
FileFilterStrategy combined = filter1.and(filter2);
FileFilterStrategy either = filter1.or(filter2);
FileFilterStrategy inverted = filter1.negate();
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
v.landau/
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ HarvesterConfig.java          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ service/
‚îÇ   ‚îú‚îÄ‚îÄ FileHarvesterService.java     # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–µ—Ä–≤–∏—Å–∞
‚îÇ   ‚îî‚îÄ‚îÄ impl/
‚îÇ       ‚îî‚îÄ‚îÄ FileHarvesterServiceImpl.java # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ strategy/
‚îÇ   ‚îú‚îÄ‚îÄ FileFilterStrategy.java       # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ FileProcessingStrategy.java   # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ ProgressListener.java         # –°–ª—É—à–∞—Ç–µ–ª—å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
‚îÇ   ‚îî‚îÄ‚îÄ impl/                         # –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
‚îú‚îÄ‚îÄ model/
‚îÇ   ‚îú‚îÄ‚îÄ FileOperation.java           # –ú–æ–¥–µ–ª—å –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ HarvestResult.java           # –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ util/
‚îÇ   ‚îú‚îÄ‚îÄ ConsoleLogger.java           # –¶–≤–µ—Ç–Ω–æ–π –ª–æ–≥–≥–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ DirectoryTreePrinter.java    # –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
‚îÇ   ‚îî‚îÄ‚îÄ PathPrompter.java            # –ü—Ä–æ–º–ø—Ç—ã –≤–≤–æ–¥–∞
‚îî‚îÄ‚îÄ Main.java                        # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
```

## –ü—Ä–∏–º–µ—Ä—ã –≤—ã–≤–æ–¥–∞

### –£—Å–ø–µ—à–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
```
[12:34:56] [INFO] Found 156 files to process
[12:34:56] [SUCCESS] ‚úì photo1.jpg
[12:34:56] [SUCCESS] ‚úì document.pdf  
[12:34:56] [WARN] ‚äò backup.tmp - Filtered out
[12:34:57] [INFO] Processing complete!

=== Harvesting Complete ===
Files processed: 156
Files copied: 142
Files skipped: 14
Total size copied: 2.45 GB
Time elapsed: 1247 ms
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
```
=== Source Directory Structure ===
/home/user/photos
üìÅ 2023 [2d, 45f]
‚îú‚îÄ‚îÄ üìÅ january [0d, 12f]
‚îÇ   ‚îú‚îÄ‚îÄ üñºÔ∏è  img001.jpg (2.3 MB)
‚îÇ   ‚îî‚îÄ‚îÄ üñºÔ∏è  img002.png (1.8 MB)  
‚îî‚îÄ‚îÄ üìÅ february [0d, 33f]
    ‚îú‚îÄ‚îÄ üñºÔ∏è  photo1.jpg (3.1 MB)
    ‚îî‚îÄ‚îÄ üìÑ  notes.txt (245 B)
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Java 11+**
- –ü—Ä–∞–≤–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- –ü—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ —Ü–µ–ª–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é (–∏–ª–∏ –µ—ë —Ä–æ–¥–∏—Ç–µ–ª—è)

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—É—Ç–µ–π, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —Å–∞–º–æ–≥–æ —Å–µ–±—è
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –æ–±—Ö–æ–¥ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Ç–µ–π
- **–£–¥–æ–±—Å—Ç–≤–æ**: –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º, —Ü–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥, –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä